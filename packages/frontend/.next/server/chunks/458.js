exports.id=458,exports.ids=[458],exports.modules={3416:(e,r,t)=>{"use strict";t.d(r,{A:()=>x});var a=t(997),s=t(8808),l=t.n(s),n=t(968),o=t.n(n);function i({size:e=32,className:r=""}){return(0,a.jsxs)("div",{className:`flex items-center gap-2 font-semibold tracking-wide ${r}`,style:{fontFamily:"Inter, system-ui, sans-serif"},children:[(0,a.jsxs)("svg",{width:e,height:.78*e,viewBox:"0 0 64 50",role:"img","aria-label":"ChronicleX Logo",className:"drop-shadow-sm",children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"lg1",x1:"0",y1:"0",x2:"1",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#4F46E5"}),a.jsx("stop",{offset:"100%",stopColor:"#7C3AED"})]}),(0,a.jsxs)("linearGradient",{id:"pg",x1:"0",y1:"0",x2:"1",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:"0.95"}),a.jsx("stop",{offset:"100%",stopColor:"#EEF2FF"})]})]}),a.jsx("rect",{x:"2",y:"2",width:"60",height:"46",rx:"10",fill:"url(#lg1)"}),a.jsx("path",{d:"M10 10h20c2.4 0 4.2.9 5.3 2.4 1.1-1.5 2.9-2.4 5.3-2.4h20v26c0 2.4-2 4.4-4.4 4.4H40c-2.4 0-4.2-.9-5.3-2.4-1.1 1.5-2.9 2.4-5.3 2.4H14.4C12 40.4 10 38.4 10 36V10Z",fill:"url(#pg)",stroke:"#E2E8F0",strokeWidth:"1.2"}),a.jsx("rect",{x:"31",y:"11",width:"2",height:"24",rx:"1",fill:"#E0E7FF"}),a.jsx("path",{d:"M24 17l4.9 6.3L24 30h4l3.1-4.4L34.2 30H38l-4.8-6.8L38 17h-3.8l-2.9 4.3L28.3 17H24Z",fill:"#4F46E5"})]}),(0,a.jsxs)("span",{className:"text-lg leading-none",children:[a.jsx("span",{className:"text-indigo-600",children:"Chronicle"}),"X"]})]})}var d=t(2945),c=t(6689),h=t(2839);function x({title:e,children:r}){let{accessToken:t,role:s,logout:n}=(0,d.a)(),[x,u]=(0,c.useState)(!1),[m,b]=(0,c.useState)("light"),[p,f]=(0,c.useState)(!1),[k,j]=(0,c.useState)("");return(0,h.useRouter)(),(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsxs)(o(),{children:[a.jsx("title",{children:e?`${e} – ChronicleX`:"ChronicleX"}),a.jsx("link",{rel:"icon",href:"/favicon.svg"}),a.jsx("meta",{name:"theme-color",content:"#6366F1"})]}),(0,a.jsxs)("header",{className:"sticky top-0 z-30 bg-white/60 dark:bg-slate-900/60 backdrop-blur supports-[backdrop-filter]:bg-white/40 border-b border-slate-200 dark:border-slate-800 shadow-sm",children:[(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 h-16 flex items-center justify-between",children:[a.jsx(l(),{href:"/","aria-label":"Home",className:"flex items-center gap-2",children:a.jsx(i,{size:36})}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center gap-2 text-sm bg-white/80 dark:bg-slate-900/80 rounded-full px-4 py-1.5 shadow border border-slate-100 dark:border-slate-800",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{value:k,onChange:e=>j(e.target.value),placeholder:"Search",className:"text-xs rounded-full pl-8 pr-3 py-1 bg-slate-100/60 dark:bg-slate-800/60 focus:outline-none focus:ring-2 focus:ring-brand-500"}),a.jsx("span",{className:"absolute left-2 top-1.5 text-slate-400",children:"\uD83D\uDD0D"})]}),a.jsx(l(),{href:"/",className:"px-3 py-1 rounded hover:bg-brand-50 dark:hover:bg-slate-800 transition",children:"Home"}),a.jsx(l(),{href:"/bookmarks",className:"px-3 py-1 rounded hover:bg-brand-50 dark:hover:bg-slate-800 transition",children:"Bookmarks"}),t&&a.jsx(l(),{href:"/dashboard/create-post",className:"px-3 py-1 rounded hover:bg-brand-50 dark:hover:bg-slate-800 transition",children:"New Post"}),t&&"ADMIN"===s&&a.jsx(l(),{href:"/admin",className:"px-3 py-1 rounded hover:bg-brand-50 dark:hover:bg-slate-800 transition",children:"Admin"}),!t&&a.jsx(l(),{href:"/auth/login",className:"px-3 py-1 rounded text-indigo-600 font-medium hover:bg-brand-50 dark:hover:bg-slate-800 transition",children:"Login"}),!t&&a.jsx(l(),{href:"/auth/register",className:"px-3 py-1.5 rounded bg-indigo-600 text-white font-semibold shadow hover:bg-indigo-700 transition",children:"Sign Up"}),t&&a.jsx("button",{onClick:n,className:"px-3 py-1 rounded text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition",children:"Logout"}),a.jsx("button",{onClick:()=>b(e=>"dark"===e?"light":"dark"),className:"px-2 py-1 rounded hover:bg-slate-200 dark:hover:bg-slate-700 transition text-lg","aria-label":"Toggle theme",children:a.jsx("span",{suppressHydrationWarning:!0,children:"dark"===m?"☀️":"\uD83C\uDF19"})})]}),(0,a.jsxs)("button",{className:"md:hidden flex flex-col items-center justify-center w-10 h-10 rounded-full border border-slate-200 dark:border-slate-700 bg-white/80 dark:bg-slate-900/80 shadow hover:shadow-md transition",onClick:()=>u(e=>!e),"aria-label":"Menu",children:[a.jsx("span",{className:`block w-6 h-0.5 rounded bg-gray-800 dark:bg-slate-100 mb-1 transition-all ${x?"rotate-45 translate-y-1.5":""}`}),a.jsx("span",{className:`block w-6 h-0.5 rounded bg-gray-800 dark:bg-slate-100 mb-1 transition-all ${x?"opacity-0":""}`}),a.jsx("span",{className:`block w-6 h-0.5 rounded bg-gray-800 dark:bg-slate-100 transition-all ${x?"-rotate-45 -translate-y-1.5":""}`})]})]}),x&&(0,a.jsxs)("div",{className:"md:hidden border-t border-slate-200 dark:border-slate-800 px-4 pb-4 flex flex-col gap-3 text-sm bg-white/95 dark:bg-slate-900/95 shadow-lg animate-fade-in rounded-b-xl",children:[(0,a.jsxs)("div",{className:"pt-3 flex items-center gap-2",children:[a.jsx("input",{value:k,onChange:e=>j(e.target.value),placeholder:"Search",className:"flex-1 text-xs rounded-full px-3 py-2 bg-slate-100/60 dark:bg-slate-800/60 focus:outline-none focus:ring-2 focus:ring-brand-500"}),a.jsx("button",{onClick:()=>b(e=>"dark"===e?"light":"dark"),className:"px-3 py-2 rounded bg-slate-100 dark:bg-slate-800","aria-label":"Toggle theme",children:a.jsx("span",{suppressHydrationWarning:!0,children:"dark"===m?"☀️":"\uD83C\uDF19"})})]}),a.jsx(l(),{href:"/",onClick:()=>u(!1),className:"px-3 py-2 rounded hover:bg-brand-50 dark:hover:bg-slate-800 transition",children:"Home"}),a.jsx(l(),{href:"/bookmarks",onClick:()=>u(!1),className:"px-3 py-2 rounded hover:bg-brand-50 dark:hover:bg-slate-800 transition",children:"Bookmarks"}),t&&a.jsx(l(),{href:"/dashboard/create-post",onClick:()=>u(!1),className:"px-3 py-2 rounded hover:bg-brand-50 dark:hover:bg-slate-800 transition",children:"New Post"}),t&&"ADMIN"===s&&a.jsx(l(),{href:"/admin",onClick:()=>u(!1),className:"px-3 py-2 rounded hover:bg-brand-50 dark:hover:bg-slate-800 transition",children:"Admin"}),!t&&a.jsx(l(),{href:"/auth/login",onClick:()=>u(!1),className:"px-3 py-2 rounded text-indigo-600 font-medium hover:bg-brand-50 dark:hover:bg-slate-800 transition",children:"Login"}),!t&&a.jsx(l(),{href:"/auth/register",onClick:()=>u(!1),className:"px-3 py-2 rounded font-medium hover:bg-brand-50 dark:hover:bg-slate-800 transition",children:"Sign Up"}),t&&a.jsx("button",{onClick:()=>{n(),u(!1)},className:"text-left px-3 py-2 rounded text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition",children:"Logout"})]})]}),a.jsx("main",{className:"flex-1 bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-950",children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:r})}),a.jsx("footer",{className:"border-t text-xs text-center py-3 text-gray-500 bg-white/80 dark:bg-slate-900/80 shadow-[0_-1px_0_0_rgba(0,0,0,0.03)]",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 flex flex-col md:flex-row items-center justify-between gap-2",children:[(0,a.jsxs)("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:["\xa9 ",new Date().getFullYear()," ChronicleX"]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[a.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Built by"}),a.jsx("a",{href:"https://github.com/VanshAgrawal52",target:"_blank",rel:"noopener",className:"text-indigo-600 font-medium hover:underline",children:"Vansh Agrawal"}),a.jsx("a",{href:"https://github.com/VanshAgrawal52",target:"_blank",rel:"noopener","aria-label":"GitHub profile",className:"inline-flex items-center text-gray-600 hover:text-indigo-600 transition",children:a.jsx(g,{className:"w-4 h-4"})})]})]})})]})}function g({className:e=""}){return a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:e,role:"img","aria-hidden":"true",children:a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12c0 4.42 2.87 8.17 6.84 9.5.5.09.68-.22.68-.48 0-.24-.01-.87-.01-1.7-2.78.6-3.37-1.34-3.37-1.34-.45-1.13-1.1-1.43-1.1-1.43-.9-.62.07-.61.07-.61 1 .07 1.53 1.03 1.53 1.03.89 1.52 2.34 1.08 2.91.83.09-.65.35-1.08.63-1.33-2.22-.25-4.56-1.11-4.56-4.95 0-1.09.39-1.98 1.03-2.68-.1-.25-.45-1.27.1-2.65 0 0 .84-.27 2.75 1.02A9.56 9.56 0 0 1 12 7.07c.85.004 1.71.12 2.51.35 1.91-1.29 2.75-1.02 2.75-1.02.55 1.38.2 2.4.1 2.65.64.7 1.03 1.59 1.03 2.68 0 3.85-2.34 4.7-4.57 4.95.36.31.68.92.68 1.85 0 1.33-.01 2.4-.01 2.73 0 .27.18.58.69.48A10.01 10.01 0 0 0 22 12c0-5.52-4.48-10-10-10z"})})}},2945:(e,r,t)=>{"use strict";t.d(r,{H:()=>o,a:()=>i});var a=t(997),s=t(6689),l=t(6001);let n=(0,s.createContext)(void 0),o=({children:e})=>{let[r,t]=(0,s.useState)(null),[o,i]=(0,s.useState)(null),[d,c]=(0,s.useState)(null),[h,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("accessToken"),r=localStorage.getItem("refreshToken"),a=localStorage.getItem("role");e&&t(e),r&&i(r),("ADMIN"===a||"AUTHOR"===a||"READER"===a)&&c(a)},[]);let g=e=>{try{return JSON.parse(atob(e.split(".")[1])).role||null}catch{return null}},u=e=>{t(e.accessToken),i(e.refreshToken);let r=g(e.accessToken);c(r),localStorage.setItem("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),r?localStorage.setItem("role",r):localStorage.removeItem("role")},m=()=>{t(null),i(null),c(null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("role")},b=(0,s.useCallback)(async()=>{if(h||!o)return!1;x(!0);try{let e=await fetch(`${l.T}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:o})});if(!e.ok)return m(),!1;let r=await e.json();return u(r),!0}finally{x(!1)}},[h,o]),p=(0,s.useCallback)(async(e,t={})=>{let a=new Headers(t.headers||{});r&&a.set("Authorization",`Bearer ${r}`);let s=await fetch(e,{...t,headers:a});if(401===s.status&&o&&await b()){let r=new Headers(t.headers||{}),a=localStorage.getItem("accessToken");a&&r.set("Authorization",`Bearer ${a}`),s=await fetch(e,{...t,headers:r})}return s},[r,o,b]);return a.jsx(n.Provider,{value:{accessToken:r,role:d,login:e=>u(e),logout:m,fetchWithAuth:p},children:e})};function i(){let e=(0,s.useContext)(n);if(!e)throw Error("useAuth outside provider");return e}},6001:(e,r,t)=>{"use strict";t.d(r,{T:()=>a});let a=process.env.NEXT_PUBLIC_API_URL||"http://localhost:4000"},8458:(e,r,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{default:()=>c});var s=t(997);t(1688);var l=t(9752),n=t(2945),o=t(3416),i=t(7270),d=e([l,i]);[l,i]=d.then?(await d)():d;let h=new l.QueryClient;function c({Component:e,pageProps:r}){return s.jsx(n.H,{children:(0,s.jsxs)(l.QueryClientProvider,{client:h,children:[s.jsx(o.A,{children:s.jsx(e,{...r})}),s.jsx(i.Toaster,{richColors:!0,position:"top-right",duration:1500,closeButton:!0,theme:"system"})]})})}a()}catch(e){a(e)}})},1688:()=>{}};